parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"oiPd":[function(require,module,exports) {
module.exports="https://assets.ricequant.com/quant/theme-light.e8b36f79.png";
},{}],"IHWd":[function(require,module,exports) {
module.exports="https://assets.ricequant.com/quant/theme-dark.8f7aa813.png";
},{}],"MWF9":[function(require,module,exports) {
module.exports="https://assets.ricequant.com/quant/default-avatar.b155799c.png";
},{}],"AAxz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("axios")),t=n(require("lodash/debounce"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return o(e)||i(e)||v(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return f(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){d(i,r,a,o,s,"next",e)}function s(e){d(i,r,a,o,s,"throw",e)}o(void 0)})}}function p(e,t){return w(e)||m(e,t)||v(e,t)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}function w(e){if(Array.isArray(e))return e}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b={name:"Tooltip",props:{text:{type:String,default:""},mode:{type:String,default:"weak"}},data:function(){return{}}};function _(e,t,n,r,a,i,o,s,c,u){"boolean"!=typeof o&&(c=s,s=o,o=!1);var d,l="function"==typeof n?n.options:n;if(e&&e.render&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,a&&(l.functional=!0)),r&&(l._scopeId=r),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=d):t&&(d=o?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,d):[d]}return n}var k=b,y=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:["rq-header-tooltip",this.mode]},[t("div",{staticClass:"rq-header-tooltip__text"},[this._v(this._s(this.text))]),this._v(" "),t("div",{staticClass:"rq-header-tooltip__arrow"})])},x=[];y._withStripped=!0;var C,q=void 0,S="data-v-736444cf",R=void 0,V=!1,O=_({render:y,staticRenderFns:x},q,k,S,V,R,!1,void 0,void 0,void 0),A=[],E="@@clickoutsideContext",N=0;function P(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&r.target&&a.target)||e.contains(r.target)||e.contains(a.target)||e===r.target||n.context.popperElm&&(n.context.popperElm.contains(r.target)||n.context.popperElm.contains(a.target))||(t.expression&&e[E].methodName&&n.context[e[E].methodName]?n.context[e[E].methodName]():e[E].bindingFn&&e[E].bindingFn())}}document.addEventListener("mousedown",function(e){C=e}),document.addEventListener("mouseup",function(e){A.forEach(function(t){return t[E].documentHandler(e,C)})});var M={bind:function(e,t,n){A.push(e);var r=N+=1;e[E]={id:r,documentHandler:P(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[E].documentHandler=P(e,t,n),e[E].methodName=t.expression,e[E].bindingFn=t.value},unbind:function(e){for(var t=A.length,n=0;n<t;n++)if(A[n][E].id===e[E].id){A.splice(n,1);break}delete e[E]}},D={directives:{clickoutside:M},data:function(){return{dropdownVisible:!1}},methods:{toggleDropdownVisible:function(){this.dropdownVisible=!this.dropdownVisible},handleClickOutside:function(){this.dropdownVisible=!1}}},T={account:"common_account",theme:"common_theme",workspace:"common_workspace"},W=function(e){var t=localStorage[T[e]];try{return JSON.parse(t)}catch(n){return t}},$=function(e,t){return localStorage.setItem(T[e],"object"===g(t)?JSON.stringify(t):t)},I=function(e){return localStorage.removeItem(T[e])},L=function(e){try{var t=p(e.split(" "),2),n=t[0],r=t[1],a=void 0===r?"00:00:00":r,i=p(n.split("-"),3),o=i[0],s=i[1],c=i[2],u=p(a.split(":"),3),d=u[0],l=u[1],h=u[2];return new Date(o,s-1,c,d,l,h)}catch(v){throw new Error("日期格式不对")}},j=function(){return window.CSS&&window.CSS.supports&&window.CSS.supports("color","var(--fake-var)")};function F(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a;"function"==typeof window[e]?(a=window)[e].apply(a,n):setTimeout(function(){var t;"function"==typeof window[e]&&(t=window)[e].apply(t,n)},3e3)}var B=function(e){if(e){var t=e;"string"==typeof e&&(t={path:e});var n=t,r=n.outer,a=n.newBlock,i=n.path;i&&(a?window.open(i):r?window.location.href=i:this.$router.push(i))}},Q={name:"ProductMenu",components:{Tooltip:O},mixins:[D],props:{config:{type:Array,required:!0}},data:function(){return{tooltipText:"切换产品"}},methods:{handleLink:B}},H=Q,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"rq-header-menu"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"rq-header-menu__dropdown"},e._l(e.config,function(t,r){return n("div",{key:r,class:["rq-header-menu__dropdown-item",{"is-active":t.isActive}],on:{click:function(n){return e.handleLink(t.link)}}},[t.isActive?n("span",{staticClass:"rq-header-menu__dropdown-annulus"}):e._e(),e._v("\n      "+e._s(t.label)+"\n    ")])}),0),e._v(" "),n("span",{class:["rq-header-tooltip-wrapper",{"is-tooltip-hidden is-icon-active":e.dropdownVisible}],on:{click:e.toggleDropdownVisible}},[n("i",{staticClass:"icon-base icon-base-switch-products active-icon"}),e._v(" "),n("Tooltip",{attrs:{text:e.tooltipText}})],1)])},z=[];U._withStripped=!0;var K=void 0,J="data-v-8e2ee7ea",X=void 0,Y=!1,G=_({render:U,staticRenderFns:z},K,H,J,Y,X,!1,void 0,void 0,void 0),Z=e.default.create({baseURL:"/",timeout:3e3});function ee(e){return Object.entries(e).map(function(e){return e.join("=")}).join("&")}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=l(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z({url:t,method:"post",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},data:ee(n)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var re="api/rqmessager/v1",ae=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r,a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.unread,r=t.limit,a=t.offset,e.next=3,Z.get("".concat(re,"/messages"),{params:{unread:n,limit:r,offset:a}});case 3:return i=e.sent,o=i.data,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.delete("".concat(re,"/message/").concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.delete("".concat(re,"/messages"),{params:{unread:t}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.patch("".concat(re,"/message/").concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=l(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.patch("".concat(re,"/messages"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ue=function(){return te("api/user/isLogin.do",{})},de=function(){var e=l(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"api/user/logout.do",e.next=3,Z.get("api/user/logout.do");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=l(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("api/user/v1/workspaces");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/api/user/v1/workspaces/products",{params:{product_name:t}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),he={name:"WorkspaceSwitch",components:{Tooltip:O},mixins:[D],props:{userId:{type:Number,default:null}},data:function(){return{tooltipVisible:!1,workspaces:[],curWs:{},storageKey:"workspace",localStorageWorkspaces:W("workspace")||{}}},computed:{settingVisible:function(){return this.curWs.admin===this.userId}},watch:{userId:function(){this.setDefaultWorkspace()},curWs:function(){var e=this;this.$nextTick(function(){e.tooltipVisible=e.$refs.curWsLabel.scrollWidth>e.$refs.curWsLabel.offsetWidth})}},mounted:function(){var e=this;this.getWorkspaces();var t=function(t){return"refresh"===t.name&&e.getWorkspaces()};window.rqevent&&(rqevent.on("workspace",t),this.$once("hook:beforeDestroy",function(){return rqevent.off(t)}))},methods:{handleClick:function(){this.settingVisible&&B({path:"/dashboard/workspace/".concat(this.curWs.id),outer:!0})},getWorkspaces:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var n,r,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([le(),pe()]);case 2:if(n=t.sent,r=p(n,2),a=r[0],i=r[1],null!=a&&a.data){t.next=8;break}return t.abrupt("return");case 8:i.data.some(function(e){return e.product.some(function(e){return"RQFUND"===e.product.name&&L(e.start)<new Date&&L(e.expire)>new Date})})||(document.querySelector(".rq-header-menu__dropdown-item:nth-of-type(3)").style.display="none"),o=null==i?void 0:i.data.reduce(function(e,t){return c(c({},e),{},u({},t.ws_id,t.product))},{}),e.workspaces=a.data.map(function(e){return c(c({},e),{},{isQuantEnterprise:!!o[e.id].find(function(e){return"QUANT"===e.product.name&&"Enterprise"===e.product.version&&L(e.start)<new Date&&L(e.expire)>new Date})})}),e.workspaces.length||(delete e.localStorageWorkspaces[e.userId],$(e.storageKey,e.localStorageWorkspaces)),e.setDefaultWorkspace();case 13:case"end":return t.stop()}},t)}))()},setDefaultWorkspace:function(){var e;if(this.userId&&this.workspaces.length&&(null===(e=this.curWs)||void 0===e||!e.id)){var t=this.localStorageWorkspaces[this.userId],n=this.workspaces.find(function(e){return e.id===t});this.setWorkspace(n||this.workspaces[0])}},setWorkspace:function(e){this.localStorageWorkspaces[this.userId]=e.id,this.curWs=e,$(this.storageKey,this.localStorageWorkspaces),this.$emit("switch-workspace",e.id),this.dropdownVisible=!1},createWorkspace:function(){var e="/dashboard",t="#createWs";window.location.pathname.startsWith(e)?this.$emit("create-workspace"):B({path:"".concat(e).concat(t),outer:!0})}}},ve=he,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],class:["rq-header-ws-container",{"is-dropdown-active":e.dropdownVisible}]},[n("transition",{attrs:{name:"rq-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"rq-header-ws-dropdown"},[e._l(e.workspaces,function(t){return n("div",{key:t.id,class:["rq-header-ws-dropdown__item",{"is-active":t.id===e.curWs.id}],on:{click:function(n){return e.setWorkspace(t)}}},[t.isQuantEnterprise?n("i",{staticClass:"icon-base icon-base-enterprise"}):e._e(),e._v(" "),n("span",{staticClass:"rq-header-ws-dropdown__item-label"},[e._v("\n          "+e._s(t.name))]),e._v(" "),t.id===e.curWs.id?n("i",{staticClass:"icon-base icon-base-success"}):e._e()])}),e._v(" "),n("div",{staticClass:"rq-header-ws-dropdown__btn-wrapper"},[n("button",{staticClass:"rq-header-ws-dropdown__btn",on:{click:e.createWorkspace}},[n("i",{staticClass:"icon-base icon-base-circle-plus"}),e._v("\n          创建新的工作空间\n        ")])])],2)]),e._v(" "),n("div",{class:["rq-header-ws-btn",{"is-tooltip-hidden":e.dropdownVisible}],on:{click:e.toggleDropdownVisible}},[n("span",{class:["icon-set-up-wrapper"]},[e.settingVisible?[n("i",{staticClass:"icon-base icon-base-set-up-fill icon-set-up active-icon",on:{click:function(t){return t.stopPropagation(),e.handleClick.apply(null,arguments)}}}),e._v(" "),n("i",{staticClass:"icon-base icon-base-set-up icon-set-up",on:{click:function(t){return t.stopPropagation(),e.handleClick.apply(null,arguments)}}}),e._v(" "),n("Tooltip",{attrs:{mode:"weak",text:"进入该工作空间"}})]:e._e()],2),e._v(" "),n("span",{class:["rq-header-ws-btn__label-wrapper",{"is-tooltip-hidden":e.dropdownVisible}]},[n("span",{ref:"curWsLabel",staticClass:"rq-header-ws-btn__label"},[e._v("\n        "+e._s(e.curWs.name)+"\n      ")]),e._v(" "),n("Tooltip",{directives:[{name:"show",rawName:"v-show",value:e.tooltipVisible,expression:"tooltipVisible"}],attrs:{mode:"strong",text:e.curWs.name}})],1),e._v(" "),n("i",{staticClass:"icon-base icon-base-caret-bottom"})])],1)},me=[];fe._withStripped=!0;var we=void 0,ge="data-v-0f3d6f57",be=void 0,_e=!1,ke=_({render:fe,staticRenderFns:me},we,ve,ge,_e,be,!1,void 0,void 0,void 0),ye={name:"ProductNav",props:{config:{type:Object,default:function(){return{}}}},methods:{handleLink:B}},xe=ye,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rq-header-nav"},e._l(e.config.links,function(t,r){return n("div",{key:r,class:["rq-header-nav__item",{"is-active":e.$route.path.startsWith(t.link)}],on:{click:function(n){return e.handleLink(t.link)}}},[n("span",[e._v(" "+e._s(t.label)+" ")])])}),0)},qe=[];Ce._withStripped=!0;var Se=void 0,Re="data-v-054bcb52",Ve=void 0,Oe=!1,Ae=_({render:Ce,staticRenderFns:qe},Se,xe,Re,Oe,Ve,!1,void 0,void 0,void 0),Ee={name:"Document",mixins:[D],data:function(){return{config:[{label:"RQAMS文档",links:[{label:"RQAMS用户说明文档",link:{path:"/doc/rqams/",newBlock:!0}},{label:"RQAMSC说明文档",link:{path:"/doc/rqamsc/",newBlock:!0}}]},{label:"量化平台文档",link:{path:"/doc/quant/",newBlock:!0}},{label:"RQSDK使用文档",links:[{label:"Ricequant SDK快速上手",link:{path:"/doc/rqsdk/",newBlock:!0}},{label:"RQData - 金融数据 API",links:[{label:"Python API文档",link:{path:"/doc/rqdata/python/",newBlock:!0}},{label:"Http API文档",link:{path:"/doc/rqdata/http/",newBlock:!0}}]},{label:"RQAlpha Plus - 回测框架",links:[{label:"使用教程",link:{path:"/doc/rqalpha-plus/tutorial.html",newBlock:!0}},{label:"API使用手册",link:{path:"/doc/rqalpha-plus/api/",newBlock:!0}}]},{label:"RQFactor - 因子投研工具",links:[{label:"使用教程",link:{path:"/doc/rqfactor/manual.html",newBlock:!0}},{label:"API使用手册",link:{path:"/doc/rqfactor/api.html",newBlock:!0}}]},{label:"RQOptimizer - 股票组合优化器",links:[{label:"使用教程",link:{path:"/doc/rqoptimize/manual.html",newBlock:!0}},{label:"API使用手册",link:{path:"/doc/rqoptimizer/api/",newBlock:!0}}]},{label:"RQPAttr - 绩效归因工具",links:[{label:"使用教程",link:{path:"/doc/rqpattr/manual.html",newBlock:!0}}]}]},{label:"帮助中心",link:{path:"/doc/faq/",newBlock:!0}}]}},methods:{handleLink:B}},Ne=Ee,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"rq-header-doc"},[n("div",{class:["rq-header-doc__icon-wrapper",{"is-icon-active":e.dropdownVisible}],on:{click:e.toggleDropdownVisible}},[n("i",{staticClass:"icon-base icon-base-help-border"}),e._v(" "),n("i",{staticClass:"icon-base icon-base-help-fill active-icon"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"rq-header-dropdown"},e._l(e.config,function(t,r){return n("div",{key:r,staticClass:"rq-header-dropdown__item"},[n("p",{staticClass:"rq-header-dropdown__label",on:{click:function(n){return e.handleLink(t.link)}}},[e._v("\n        "+e._s(t.label)+"\n        "),t.links?n("i",{staticClass:"icon-base icon-base-arrow-up"}):e._e()]),e._v(" "),t.links?n("div",{staticClass:"rq-header-dropdown__more"},e._l(t.links,function(t,r){return n("div",{key:r,staticClass:"rq-header-dropdown__more-item"},[n("p",{class:["rq-header-dropdown__label",{"not-link":!t.link}],on:{click:function(n){return e.handleLink(t.link)}}},[e._v("\n            "+e._s(t.label)+"\n          ")]),e._v(" "),t.links?e._l(t.links,function(t,r){return n("p",{key:r,staticClass:"rq-header-dropdown__label rq-header-dropdown__label--mini",on:{click:function(n){return e.handleLink(t.link)}}},[e._v("\n              "+e._s(t.label)+"\n            ")])}):e._e()],2)}),0):e._e()])}),0)])},Me=[];Pe._withStripped=!0;var De=void 0,Te="data-v-3b15529c",We=void 0,$e=!1,Ie=_({render:Pe,staticRenderFns:Me},De,Ne,Te,$e,We,!1,void 0,void 0,void 0),Le=require("./theme-light.png"),je=require("./theme-dark.png"),Fe=["dark","light"],Be={name:"ThemeSwitch",components:{Tooltip:O},mixins:[D],inheritAttrs:!1,data:function(){return{value:"light",isBrowerSupported:!0,isProductSupported:!0,productsSupported:["/ams","/quant","/rqcomponents"]}},computed:{modeConfig:function(){return[{label:"极致简洁",img:Le,value:"light",active:"light"===this.value,tooltipText:null},{label:"沉浸体验",img:je,value:"dark",active:"dark"===this.value,tooltipText:this.isBrowerSupported?this.isProductSupported?"":"该产品暂无深肤色":"IE浏览器不支持深肤色"}]}},mounted:function(){if(this.isBrowerSupported=j(),this.isProductSupported=!!this.productsSupported.find(function(e){return window.location.pathname.startsWith(e)}),this.isBrowerSupported&&this.isProductSupported){var e=W("theme");this.value=Fe.includes(e)?e:"light",this.themeRender(this.value)}},methods:{themeRender:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";if(Fe.includes(e)){var t=document.body.classList;t.add("theme-".concat(e)),t.forEach(function(n){n.includes("theme")&&!n.includes(e)&&t.remove(n)})}},themeChange:function(e){this.isBrowerSupported&&this.isProductSupported&&Fe.includes(e)&&(this.themeRender(e),this.value=e,this.$emit("switch-theme",e),$("theme",e))}}},Qe=Be,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"rq-header-theme"},[n("div",{class:["rq-header-theme__button",{"is-icon-active":e.dropdownVisible}],on:{click:e.toggleDropdownVisible}},[n("i",{staticClass:"icon-base icon-base-theme icon-base-theme-fills active-icon"}),e._v(" "),n("i",{staticClass:"icon-base icon-base-theme icon-base-theme-border"})]),e._v(" "),n("transition",{attrs:{name:"rq-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"rq-header-theme__dropdown"},e._l(e.modeConfig,function(t){return n("div",{key:t.label,class:["rq-header-theme__dropdown--choice",{"is-active":t.active}],on:{click:function(n){return e.themeChange(t.value)}}},[n("div",{staticClass:"rq-header-theme__dropdown--pic"},[n("i",{staticClass:"icon-base icon-base-success"}),e._v(" "),n("img",{attrs:{src:t.img,alt:""}})]),e._v(" "),n("p",[e._v(e._s(t.label))]),e._v(" "),t.tooltipText?n("Tooltip",{class:{"is-ie":!e.isBrowerSupported},attrs:{text:t.tooltipText,mode:"weak"}}):e._e()],1)}),0)])],1)},Ue=[];He._withStripped=!0;var ze=void 0,Ke="data-v-6c2d3d9a",Je=void 0,Xe=!1,Ye=_({render:He,staticRenderFns:Ue},ze,Qe,Ke,Xe,Je,!1,void 0,void 0,void 0),Ge={name:"MessageList",filters:{dateFormat:function(e){function t(e){return e<10?"0".concat(e):e}var n=new Date(1e3*e);return"".concat(n.getFullYear(),".").concat(t(n.getMonth()+1),".").concat(t(n.getDate())," ").concat(t(n.getHours()),":").concat(t(n.getMinutes()),":").concat(t(n.getSeconds()))}},props:{message:{type:Array,default:function(){return[]}}},data:function(){return{}},mounted:function(){this.$refs.list.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){this.$refs.list.removeEventListener("scroll",this.handleScroll)},methods:{handleClick:function(e,t){var n="";n="factor"===e.type?"/quant/factor":"".concat({quant:"/quant",ams:"/ams",fof:"/fof"}[e.system],"?action=").concat(encodeURIComponent(JSON.stringify(e.action))),window.open(n),this.$emit("update-message",{msg:e,index:t})},handleScroll:(0,t.default)(function(e){var t=e.target;t.scrollTop+t.offsetHeight>=t.scrollHeight-20&&this.$emit("get-message")},300)}},Ze=Ge,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rq-header-msgs-wrapper"},[n("div",{ref:"list",staticClass:"rq-header-msgs"},e._l(e.message,function(t,r){return n("div",{key:t.id,staticClass:"rq-header-msg"},[n("i",{staticClass:"icon-base icon-base-remove-outline",on:{click:function(n){return n.stopPropagation(),e.$emit("delete-message",{msg:t,index:r})}}}),e._v(" "),n("a",{staticClass:"rq-header-msg__link",attrs:{rel:"noopener",target:"_blank"},on:{click:function(n){return e.handleClick(t,r)}}},[n("p",{staticClass:"rq-header-msg__title"},[n("img",{staticClass:"rq-header-msg__avatar",attrs:{src:t.from.avatar,alt:""}}),e._v(" "),n("span",{staticClass:"rq-header-msg__name"},[e._v(e._s(t.from.name))]),e._v(" "),n("span",{staticClass:"rq-header-msg__time"},[e._v(e._s(e._f("dateFormat")(t.datetime)))])]),e._v(" "),n("p",{staticClass:"rq-header-msg__text"},[e._v("\n          "+e._s(t.content)+"\n        ")])])])}),0)])},tt=[];et._withStripped=!0;var nt=void 0,rt="data-v-6a11229b",at=void 0,it=!1,ot=_({render:et,staticRenderFns:tt},nt,Ze,rt,it,at,!1,void 0,void 0,void 0),st={name:"Message",components:{MessageList:ot},mixins:[D],data:function(){return{messageTypes:[{label:"未读消息",value:"unread"},{label:"已读消息",value:"read"}],messageSettings:[{label:"全部已读",value:"updateAllMessage"},{label:"删除已读",value:"deleteAllMessage"}],curType:"unread",unreadMsgNum:0,limit:10,fetchInterval:null,message:{read:{type:"read",data:[],unread:!1,set:new Set,offset:0},unread:{type:"unread",data:[],set:new Set,unread:!0,offset:0}},settingDropdownVisible:!1}},mounted:function(){var e=this;Object.values(this.message).forEach(function(t){e.getMessage({unread:t.unread,updateToView:!0})}),this.fetchInterval=setInterval(function(){Object.values(e.message).forEach(function(t){(e.dropdownVisible||t.unread)&&e.getMessage({unread:t.unread,offset:0,limit:e.dropdownVisible?Math.max(e.limit,t.data.length):1})})},6e4)},beforeDestroy:function(){this.fetchInterval&&clearInterval(this.fetchInterval)},methods:{handleSettingClickOutside:function(){this.setSettingDropdownVisible(!1)},setSettingDropdownVisible:function(e){this.settingDropdownVisible=e},updateMessage:function(e){var t=this;return l(regeneratorRuntime.mark(function n(){var r,a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.msg,a=e.unread,i=e.index,a){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,se(r.id);case 5:t.message.unread.data.splice(i,1),t.unreadMsgNum-=1,t.message.read.data.unshift(r);case 8:case"end":return n.stop()}},n)}))()},deleteMessage:function(e){var t=this;return l(regeneratorRuntime.mark(function n(){var r,a,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.unread,a=e.msg,i=e.index,n.next=3,ie(a.id);case 3:o=r?"unread":"read",t.message[o].data.splice(i,1),r&&(t.unreadMsgNum-=1);case 6:case"end":return n.stop()}},n)}))()},deleteAllMessage:function(){var e=this;return l(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(!1);case 2:e.message.read.data=[];case 3:case"end":return t.stop()}},t)}))()},updateAllMessage:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce();case 2:(n=e.message.read.data).unshift.apply(n,r(e.message.unread.data)),e.unreadMsgNum=0,e.message.unread.data=[];case 5:case"end":return t.stop()}},t)}))()},getMessage:function(e){var t=arguments,n=this;return l(regeneratorRuntime.mark(function r(){var a,i,o,s,u,d,l,p,h,v,f,m,w,g;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.offset,i=e.limit,o=void 0===i?n.limit:i,s=e.unread,u=void 0!==s&&s,d=e.updateToView,l=void 0!==d&&d,p=t.length>1&&void 0!==t[1]&&t[1],h=u?"unread":"read",r.next=5,ae({unread:u,limit:o,offset:a});case 5:if((v=r.sent).data){r.next=8;break}return r.abrupt("return");case 8:if(!n.dropdownVisible&&!l){r.next=20;break}if(f=[],0===a&&n.message[h].set.clear(),v.data.forEach(function(e){n.message[h].set.has(e.id)||(f.push(c({},e)),n.message[h].set.add(e.id))}),0===a?((m=n.message[h].data).splice.apply(m,[0,n.message[h].data.length].concat(f)),n.message[h].offset=0):(w=n.message[h].data).push.apply(w,f),n.message[h].offset+=v.data.length,p){r.next=20;break}if(!((g=v.data.length-f.length)>0)){r.next=20;break}return r.next=19,n.getMessage({offset:n.message[h].offset,limit:g,unread:u},!0);case 19:return r.abrupt("return");case 20:u&&(n.unreadMsgNum=v.total);case 21:case"end":return r.stop()}},r)}))()},setMessage:function(e){this.settingDropdownVisible=!1,this[e]()}}},ct=st,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],ref:"message",class:["rq-header-msgs",{"is-dropdown-active":e.dropdownVisible}]},[n("div",{class:["rq-header-msgs__btn",{"is-icon-active":e.dropdownVisible}],on:{click:e.toggleDropdownVisible}},[n("i",{staticClass:"icon-base icon-base-message-center-border icon-message-center"}),e._v(" "),n("i",{staticClass:"icon-base icon-base-message-center-fill icon-message-center active-icon"}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.unreadMsgNum>0,expression:"unreadMsgNum > 0"}],staticClass:"rq-header-msgs__dot"})]),e._v(" "),n("transition",{attrs:{name:"rq-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"rq-header-dropdown"},[n("div",{staticClass:"rq-header-dropdown__header"},[n("div",e._l(e.messageTypes,function(t){return n("span",{key:t.value,class:["rq-header-dropdown__type",{"is-active":t.value===e.curType}],on:{click:function(n){e.curType=t.value}}},[e._v(e._s(t.label))])}),0),e._v(" "),n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleSettingClickOutside,expression:"handleSettingClickOutside"}]},[n("i",{class:["icon-base icon-base-message-border ",{"is-active":e.settingDropdownVisible}],on:{click:function(t){return e.setSettingDropdownVisible(!e.settingDropdownVisible)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.settingDropdownVisible,expression:"settingDropdownVisible"}],staticClass:"rq-header-dropdown__settings"},e._l(e.messageSettings,function(t){return n("button",{key:t.value,staticClass:"rq-header-dropdown__setting",on:{click:function(n){return e.setMessage(t.value)}}},[e._v("\n              "+e._s(t.label)+"\n            ")])}),0)])]),e._v(" "),e._l(e.message,function(t,r){return n("message-list",{directives:[{name:"show",rawName:"v-show",value:e.curType===t.type,expression:"curType === msg.type"}],key:r,attrs:{message:t.data},on:{"get-message":function(n){return e.getMessage(Object.assign({},n,{unread:t.unread,offset:t.offset}))},"delete-message":function(n){return e.deleteMessage(Object.assign({},n,{unread:t.unread}))},"update-message":function(n){return e.updateMessage(Object.assign({},n,{unread:t.unread}))}}})})],2)])],1)},dt=[];ut._withStripped=!0;var lt=void 0,pt="data-v-c3a83a9a",ht=void 0,vt=!1,ft=_({render:ut,staticRenderFns:dt},lt,ct,pt,vt,ht,!1,void 0,void 0,void 0),mt=require("./default-avatar.png"),wt={name:"Account",mixins:[D],props:{avatar:{default:"",type:String},username:{default:"未登陆",type:String}},data:function(){return{links:[{link:{path:"/dashboard",outer:!0},label:"工作空间"},{link:{path:"/dashboard/account#setting",outer:!0},label:"账号中心"},{link:{path:"/",outer:!0},label:"回到首页"},{event:"logout",label:"登出账号"}],isAvatarLoadError:!1}},computed:{avatarShow:function(){return this.isAvatarLoadError?mt:this.avatar||mt}},methods:{handleAvatarLoadError:function(){this.isAvatarLoadError=!0},handleClick:function(e){"logout"===e.event?this.$emit("logout"):e.link&&B(e.link)}}},gt=wt,bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"rq-header-account"},[n("div",{class:["rq-header-avatar",{"is-active":e.dropdownVisible}],on:{click:e.toggleDropdownVisible}},[n("img",{staticClass:"rq-header-avatar__img",attrs:{src:e.avatarShow,alt:""},on:{error:e.handleAvatarLoadError}})]),e._v(" "),n("transition",{attrs:{name:"rq-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"rq-header-dropdown"},[n("p",{staticClass:"rq-header-dropdown__label"},[e._v(e._s(e.username))]),e._v(" "),e._l(e.links,function(t,r){return n("p",{key:r,staticClass:"rq-header-dropdown__link",on:{click:function(n){return e.handleClick(t)}}},[e._v("\n        "+e._s(t.label)+"\n      ")])})],2)])],1)},_t=[];bt._withStripped=!0;var kt=void 0,yt="data-v-127d1c08",xt=void 0,Ct=!1,qt=_({render:bt,staticRenderFns:_t},kt,gt,yt,Ct,xt,!1,void 0,void 0,void 0),St={name:"Notification",props:{text:{type:String,default:""}},data:function(){return{isHidden:!1}},computed:{visible:function(){return!(this.isHidden||!this.text&&!this.$slots.default)}},methods:{handleClose:function(){this.isHidden=!0}}},Rt=St,Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"rq-header-notification"},[e.$slots.default?e._t("default"):[e._v("\n    "+e._s(e.text)+"\n  ")],e._v(" "),n("i",{staticClass:"icon-base icon-base-circle-close",on:{click:e.handleClose}})],2):e._e()},Ot=[];Vt._withStripped=!0;var At=void 0,Et="data-v-4c68e5d0",Nt=void 0,Pt=!1,Mt=_({render:Vt,staticRenderFns:Ot},At,Rt,Et,Pt,Nt,!1,void 0,void 0,void 0),Dt={name:"RqHeader",components:{Tooltip:O,ProductMenu:G,WorkspaceSwitch:ke,ProductNav:Ae,Document:Ie,ThemeSwitch:Ye,Message:ft,Account:qt,Notification:Mt},props:{notification:{default:"",type:String},beforeLogout:{default:null,type:Function},home:{type:Object,default:function(){return{tooltipText:"回到米筐官网首页",link:{path:"/",outer:!0}}}},hasMessage:{default:!0,type:Boolean}},data:function(){return{products:[],account:{},roadShow:{label:"预约路演",link:{path:"/welcome/trial/road-show",outer:!0}}}},computed:{activeProduct:function(){return this.products.find(function(e){return e.isActive})||{}}},mounted:function(){var e=this;return l(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getAccount(),e.initProducts();case 2:case"end":return t.stop()}},t)}))()},methods:{handleLink:B,getAccount:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue();case 2:n=t.sent,0===(r=n.data).code?($("account",{isLogin:!0,fullname:r.fullname,avatar:r.avatar,phone:r.phone,email:r.email,userId:r.userId}),e.account=r,F("gio","setUserId",r.userId)):I("account");case 5:case"end":return t.stop()}},t)}))()},initProducts:function(){this.products=[{link:{path:"/quant",outer:!0},label:"Quant 量化协作平台",name:"Quant"},{link:{path:"/ams",outer:!0},label:"RQAMS 资管平台",name:"RQAMS",links:[{label:"投后分析",icon:"performance-analysis",link:"/post-investment-analysis"},{label:"投资驾驶舱",icon:"investment-cockpit",link:"/investment-cockpit"},{label:"数据管理",icon:"portfolio-management",link:"/portfolio-management"}]},{link:{path:"/fof",outer:!0},label:"RQFund 基金投研",name:"RQFund"},{link:{path:"/rqindex",outer:!0},label:"RQIndex 米筐特色指数",name:"RQIndex"}].map(function(e){return c(c({},e),{},{isActive:window.location.pathname.startsWith(e.link.path)})})},handleEvent:function(e,t){this.$emit(e,t)},handleLogout:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.beforeLogout){t.next=3;break}return t.next=3,e.beforeLogout();case 3:return t.next=5,de();case 5:n=t.sent,0===n.code&&(I("account"),e.handleLink({outer:!0,path:"/"}));case 8:case"end":return t.stop()}},t)}))()}}},Tt=Dt,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rq-header-wrapper"},[n("Notification",{attrs:{text:e.notification}},[e.$slots.notification?[e._t("notification")]:e._e()],2),e._v(" "),n("header",{staticClass:"rq-header"},[n("ProductMenu",{attrs:{config:e.products}}),e._v(" "),n("div",{staticClass:"rq-header-home tooltip-wrapper",on:{click:function(t){return e.handleLink(e.home.link)}}},[n("i",{staticClass:"icon-base icon-home icon-base-ricequant"}),e._v(" "),n("i",{staticClass:"icon-base icon-home icon-base-back-website active-icon"}),e._v(" "),n("Tooltip",{attrs:{text:e.home.tooltipText}})],1),e._v(" "),e.activeProduct.name?n("span",{staticClass:"rq-header-name"},[e._v(e._s(e.activeProduct.name))]):e._e(),e._v(" "),n("WorkspaceSwitch",{attrs:{"user-id":e.account.userId},on:{"switch-workspace":function(t){return e.handleEvent("switch-workspace",t)},"create-workspace":function(t){return e.handleEvent("create-workspace")}}}),e._v(" "),n("ProductNav",{directives:[{name:"show",rawName:"v-show",value:e.activeProduct,expression:"activeProduct"}],attrs:{config:e.activeProduct}}),e._v(" "),n("button",{staticClass:"rq-header-road-show",on:{click:function(t){return e.handleLink(e.roadShow.link)}}},[e._v("\n      "+e._s(e.roadShow.label)+"\n    ")]),e._v(" "),n("Document"),e._v(" "),n("ThemeSwitch",{on:{"switch-theme":function(t){return e.handleEvent("switch-theme",t)}}}),e._v(" "),e.hasMessage?n("Message"):e._e(),e._v(" "),n("Account",{attrs:{avatar:e.account.avatar,username:e.account.fullname},on:{logout:e.handleLogout}})],1)],1)},$t=[];Wt._withStripped=!0;var It=void 0,Lt="data-v-58d540f5",jt=void 0,Ft=!1,Bt=_({render:Wt,staticRenderFns:$t},It,Tt,Lt,Ft,jt,!1,void 0,void 0,void 0);exports.default=Bt,Bt.install=function(e){e.component(Bt.name,Bt)};
},{"axios":"HjT4","lodash/debounce":"CXfR","./theme-light.png":"oiPd","./theme-dark.png":"IHWd","./default-avatar.png":"MWF9"}],"gVPO":[function(require,module,exports) {

},{}],"n1jH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("vuex"),r=n(require("@rqjs/rqcomponents/lib/rq-header"));require("@rqjs/rqcomponents/lib/theme/rq-header.css");var t=require("/util");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r){return s(e)||c(e,r)||i(e,r)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}function s(e){if(Array.isArray(e))return e}function l(e,r,t,n,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void t(s)}u.done?r(c):Promise.resolve(c).then(n,o)}function p(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function i(e){l(a,n,o,i,u,"next",e)}function u(e){l(a,n,o,i,u,"throw",e)}i(void 0)})}}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){m(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function m(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var y={name:"TheHeader",components:{RqHeader:r.default},data:function(){return{expireMsg:""}},computed:d({},(0,e.mapState)("system",["userId"])),methods:d(d({},(0,e.mapMutations)("system",["SET_WORKSPACE"])),{},{switchWorkspace:function(e){var r=this;return p(regeneratorRuntime.mark(function n(){var a,i,u,c,s,l,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([r.$api.user.getWsMsg(e),r.$api.user.getWsProduct(e)]);case 3:a=n.sent,i=o(a,2),u=i[0].data,c=i[1].data,s=c.filter(function(e){return"QUANT"===e.product.name&&"Enterprise"===e.product.version&&(0,t.getTs)(e.expire)>Date.now()}),l=o(s,1),p=l[0],r.expireMsg="",r.SET_WORKSPACE({workspace:e,workspaceName:u.name,isEnterprise:!!p,isAdmin:u.admin===r.userId}),p&&(0,t.getTs)(p.expire)-Date.now()<=12096e5&&(f=(0,t.dateFormat)(p.expire),r.expireMsg="您机构版的 ".concat(u.name," 工作空间将于 ").concat(f,"到期，到期后无法继续体验机构版功能，如有需要延期请联系商务或技术支持处理。温馨提示：如未进行延期，届时会停止运行在该工作空间的所有模拟交易且不能恢复，如仍有问题欢迎致电0755-22676337。")),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),r.$errorMessage(n.t0);case 16:case"end":return n.stop()}},n,null,[[0,13]])}))()}})};exports.default=y;
(function(){var e=exports.default||module.exports;"function"==typeof e&&(e=e.options),Object.assign(e,{render:function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("RqHeader",{attrs:{notification:this.expireMsg},on:{"switch-workspace":this.switchWorkspace}})],1)},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-75bd8d",functional:void 0});})();
},{"vuex":"aKwh","@rqjs/rqcomponents/lib/rq-header":"AAxz","@rqjs/rqcomponents/lib/theme/rq-header.css":"gVPO","/util":"pkjA"}]},{},[], null)